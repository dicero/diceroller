<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<title>商品列表</title>
	
    <link href="/static/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="/static/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="/static/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="/static/css/animate.min.css" rel="stylesheet">
    <link href="/static/css/plugins/summernote/summernote.css" rel="stylesheet">
    <link href="/static/css/plugins/summernote/summernote-bs3.css" rel="stylesheet">
    <link href="/static/css/style.min862f.css?v=4.1.0" rel="stylesheet">
	
</head>
<body>
	<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#create">新增</button>

	<!-- 列表 开始 -->
	<table data-toggle="table" data-url="/article/listJson/4" 
		data-side-pagination="server" 
		data-pagination="true" 
		data-page-list="[10, 20, 50, 100, 200]"
		data-toolbar="#toolbar">
	    <thead>
	        <tr>
	            <th data-field="title">标题</th>
	            <th data-field="id" data-formatter="operation">操作</th>
	        </tr>
	    </thead>
	</table>
	<!-- 列表 结束 -->
	
	<!-- 模态框  开始 -->
	<div class="modal fade" id="create" tabindex="-1" role="dialog" style="width:1000px;"
	   aria-labelledby="myModalLabel" aria-hidden="true">
	   <div class="modal-dialog">
	      <div class="modal-content">
	      	 <!-- 标题 -->
	         <div class="modal-header">
	            <button type="button" class="close" 
	               data-dismiss="modal" aria-hidden="true">
	                  &times;
	            </button>
	            <h4 class="modal-title" id="myModalLabel">
	            	新增帮助中心
	            </h4>
	         </div>
	         
	          <!-- 内容  -->
	         <div class="modal-body">
           		<form action="/article/addHelp" method="post" enctype="multipart/form-data" role="form" >
                     <div class="form-group">
                         <label>标题：</label>
                         <input type="text" name="title" id="title" placeholder="请输入标题" class="form-control">
                     </div>
					 <div id="summernote">
					 	文章信息编辑
					 </div>
					 <textarea name="detail" id="detail" style="display:none;"></textarea>
					 <div class="form-group">
					 	<input type="text" name="order" id="order" placeholder="请输入排序" class="form-control">
					 </div>
	         </div>
	         
	         <!-- 按钮  -->
	         <div class="modal-footer">
	            <button type="button" class="btn btn-default" 
	               data-dismiss="modal">关闭
	            </button>
	            <button type="submit" class="btn btn-primary">保存</button>
	         </div>
	         </form>
	      </div>
		</div>
	</div>
	<!-- 模态框  结束 -->
	
	<!-- 模态框编辑  开始 -->
	<div class="modal fade" id="edit" tabindex="-1" role="dialog" style="width:1000px;"
	   aria-labelledby="myModalLabel" aria-hidden="true">
	   <div class="modal-dialog">
	      <div class="modal-content">
	      	 <!-- 标题 -->
	         <div class="modal-header">
	            <button type="button" class="close" 
	               data-dismiss="modal" aria-hidden="true">
	                  &times;
	            </button>
	            <h4 class="modal-title" id="myModalLabel">
	            	编辑帮助中心
	            </h4>
	         </div>
	         
	          <!-- 内容  -->
	         <div class="modal-body">
           		<form action="/article/edit/4" method="post" enctype="multipart/form-data" role="form" >
                     <div class="form-group">
                         <label>标题：</label>
                         <input type="text" name="title" id="titleEdit" placeholder="请输入标题" class="form-control">
                     </div>
					 <div id="summernoteEdit">
					 </div>
					 <textarea name="detail" id="detailEdit" style="display:none;"></textarea>
					 <input type="hidden" name="id" id="id" value="">
					 <input type="hidden" name="showInIndex" id="showInIndex" value="">
					 <input type="hidden" name="showOrder" id="showOrder" value="">
					 <input type="hidden" name="createTime" id="createTime" value="">
	         </div>
	         
	         <!-- 按钮  -->
	         <div class="modal-footer">
	            <button type="button" class="btn btn-default" 
	               data-dismiss="modal">关闭
	            </button>
	            <button type="submit" class="btn btn-primary">保存</button>
	         </div>
	         </form>
	      </div>
		</div>
	</div>
	<!-- 模态框编辑  结束 -->
	
	<script>
		//格式化操作
	    function operation(value) {
	        return '<a href="#" class="btn btn-primary" data-target="#edit" onclick="toEdit('+value+')">编辑</a>'+
	        	'&nbsp;&nbsp;&nbsp;&nbsp;'+
	        	'<a href="/article/del/4/?id=' + value + '" class="btn btn-primary" >删除</a>';
	    }
		
		//编辑器
	    $(document).ready(function() {
        	$('#summernote').summernote({
        		 onblur: function(e) {
        			 $("#detail").val($('#summernote').code());
        		 }
        	});
        	
        	$('#summernoteEdit').summernote({
	       		 onblur: function(e) {
	       			 $("#detailEdit").val($('#summernoteEdit').code());
	       		 }
       		});
    	});
		
	    function toEdit (id) {
			$("#edit").modal({show:true});
			$.ajax({  
                type : "GET",  
                url : "/article/toEdit?id="+id, 
                dataType : "json",
                success : function(result) {
                	$("#titleEdit").val(result.article.title);
                	$('#summernoteEdit').code(result.article.detail);
                	$('#id').val(result.article.id);
                	$('#showInIndex').val(result.article.showInIndex);
                	$('#showOrder').val(result.article.showOrder);
                	$('#createTime').val(result.article.createTime);
                }  
            });  
		}
		
		
	    		
	</script>
	<script src="/static/js/jquery.min.js?v=2.1.4"></script>
    <script src="/static/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    <script src="/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="/static/js/plugins/summernote/summernote.min.js"></script>
    <script src="/static/js/plugins/summernote/summernote-zh-CN.js"></script>
</body>
</html>